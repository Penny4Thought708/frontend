/* ============================================================
   GLOBAL BACKGROUND — MIDNIGHT GRADIENT + HEX GRID (H3)
============================================================ */

body.dark-mode {
  background: var(--hud-bg-gradient);
  color: var(--hud-cyan-soft);
  font-family: var(--font-family-body);
  overflow: hidden;
  position: relative;
  perspective: 1400px; /* enables parallax depth */
}
/* ============================================================
   PARALLAX DEPTH LAYERS (D3 — Immersive)
============================================================ */

.hud-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -10;
  transform-style: preserve-3d;
}

.hud-layer.depth-1 { transform: var(--depth-1); }
.hud-layer.depth-2 { transform: var(--depth-2); }
.hud-layer.depth-3 { transform: var(--depth-3); }
.hud-layer.depth-4 { transform: var(--depth-4); }
.hud-layer.depth-5 { transform: var(--depth-5); }
/* ============================================================
   HOLOGRAPHIC HEX GRID — Dynamic (H3)
============================================================ */

.hex-grid {
  width: 100%;
  height: 100%;
  background-size: var(--hex-size) var(--hex-size);
  background-image:
    linear-gradient(
      60deg,
      var(--hex-line) 1px,
      transparent 1px
    ),
    linear-gradient(
      -60deg,
      var(--hex-line) 1px,
      transparent 1px
    ),
    linear-gradient(
      0deg,
      var(--hex-line) 1px,
      transparent 1px
    );
  animation: hexPulse 6s ease-in-out infinite,
             hexDrift 40s linear infinite;
  opacity: 0.55;
}

/* Hex pulse waves */
@keyframes hexPulse {
  0%, 100% { opacity: 0.45; }
  50% { opacity: 0.75; }
}

/* Slow drifting movement */
@keyframes hexDrift {
  0% { transform: translate3d(0,0,0); }
  100% { transform: translate3d(-120px, -80px, 0); }
}
/* ============================================================
   HOLOGRAPHIC HEX GRID — Dynamic (H3)
============================================================ */

.hex-grid {
  width: 100%;
  height: 100%;
  background-size: var(--hex-size) var(--hex-size);
  background-image:
    linear-gradient(
      60deg,
      var(--hex-line) 1px,
      transparent 1px
    ),
    linear-gradient(
      -60deg,
      var(--hex-line) 1px,
      transparent 1px
    ),
    linear-gradient(
      0deg,
      var(--hex-line) 1px,
      transparent 1px
    );
  animation: hexPulse 6s ease-in-out infinite,
             hexDrift 40s linear infinite;
  opacity: 0.55;
}

/* Hex pulse waves */
@keyframes hexPulse {
  0%, 100% { opacity: 0.45; }
  50% { opacity: 0.75; }
}

/* Slow drifting movement */
@keyframes hexDrift {
  0% { transform: translate3d(0,0,0); }
  100% { transform: translate3d(-120px, -80px, 0); }
}
/* ============================================================
   FLICKER ENGINE — Retro‑Futuristic (T2)
============================================================ */

.hud-flicker {
  animation: hudFlicker var(--hud-flicker-speed) steps(2, end) infinite;
}

@keyframes hudFlicker {
  0% { opacity: 1; }
  50% { opacity: 0.85; }
  100% { opacity: 1; }
}
/* ============================================================
   HOLOGRAPHIC PARTICLE FIELD
============================================================ */

.hud-particles {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: radial-gradient(
    circle,
    rgba(0, 234, 255, 0.35) 1px,
    transparent 1px
  );
  background-size: 3px 3px;
  opacity: 0.15;
  animation: particleDrift 60s linear infinite;
  z-index: -8;
}

@keyframes particleDrift {
  0% { transform: translate3d(0,0,0); }
  100% { transform: translate3d(80px, 120px, 0); }
}
/* Smooth glow morphing */
:root,
.theme-tron,
.theme-cyberpunk,
.theme-tactical,
.theme-quantum {
  transition:
    --theme-accent 0.45s ease,
    --theme-accent-glow 0.45s ease,
    --theme-panel-border 0.45s ease,
    --theme-panel-border-strong 0.45s ease,
    --theme-panel-bg 0.45s ease;
}
/* Grid pulse on theme switch */
body.theme-switching .hex-grid {
  animation: gridPulse 0.8s ease-out;
}

@keyframes gridPulse {
  0% { opacity: 0.55; transform: scale(1); }
  40% { opacity: 0.9; transform: scale(1.04); }
  100% { opacity: 0.55; transform: scale(1); }
}
/* Panel border morph */
body.theme-switching .hud-panel {
  animation: panelMorph 0.6s ease-out;
}

@keyframes panelMorph {
  0% { border-color: var(--theme-panel-border); }
  50% { border-color: var(--theme-panel-border-strong); }
  100% { border-color: var(--theme-panel-border); }
}
/* Flicker burst */
body.theme-switching .hud-panel,
body.theme-switching .hud-btn {
  animation: flickerBurst 0.12s steps(2, end) 3;
}

@keyframes flickerBurst {
  0% { opacity: 1; }
  50% { opacity: 0.85; }
  100% { opacity: 1; }
}
/* Quantum Glass fade-through */
.theme-quantum.theme-switching {
  animation: quantumFade 0.6s ease-out;
}

@keyframes quantumFade {
  0% { filter: brightness(1); }
  40% { filter: brightness(2.8); }
  100% { filter: brightness(1); }
}

